(this["webpackJsonpintegrated-quest-app-fe"]=this["webpackJsonpintegrated-quest-app-fe"]||[]).push([[0],{121:function(e,t,n){e.exports={image:"ImageResource_image__3-2vY",placeholder:"ImageResource_placeholder__27rQq"}},122:function(e,t,n){e.exports={progressContainer:"Progress_progressContainer__2BKbK",progress:"Progress_progress__-ageR"}},123:function(e,t,n){e.exports={contactButton:"Contact_contactButton__Suogb",contactFooter:"Contact_contactFooter__11-xf"}},124:function(e,t,n){e.exports={taskText:"Task_taskText__3LsLN",teamTaskText:"Task_teamTaskText__3wpT2"}},125:function(e,t,n){e.exports={title:"ReceivedInventories_title__2wEnx",message:"ReceivedInventories_message__1w4IV"}},17:function(e,t,n){e.exports={accordion:"Accordion_accordion__359XQ",accordionPanel:"Accordion_accordionPanel__gexjr",mission:"Accordion_mission__1WpcN",collapsed:"Accordion_collapsed__3MNub",header:"Accordion_header__9wOqy",headerLeft:"Accordion_headerLeft__2EFSc",status:"Accordion_status__hFjY_",icon:"Accordion_icon__mFPRb",checkedIcon:"Accordion_checkedIcon__2Dsmg",uncheckedIcon:"Accordion_uncheckedIcon__1-MlZ",collapsedUncheckedIcon:"Accordion_collapsedUncheckedIcon__1zgsG",title:"Accordion_title__UdhiQ",hidden:"Accordion_hidden__3lGPL",arrowIcon:"Accordion_arrowIcon__1ZKRQ",collapsedArrowIcon:"Accordion_collapsedArrowIcon__zkVsz",content:"Accordion_content__DFumj"}},192:function(e,t,n){e.exports={label:"Label_label__-Q2Ec"}},193:function(e,t,n){e.exports={text:"Login_text__12Ijz"}},194:function(e,t,n){e.exports={currentAvatar:"Avatar_currentAvatar__3WT4v"}},195:function(e,t,n){e.exports={avatarList:"AvatarSelector_avatarList__TRGdY"}},196:function(e,t,n){e.exports={personIcon:"Personalize_personIcon__1OdHj"}},197:function(e,t,n){e.exports={teamIcon:"TeamComposition_teamIcon__3wWXf"}},198:function(e,t,n){e.exports={pageText:"SroryScreen_pageText__1i3w6"}},199:function(e,t,n){},200:function(e,t,n){e.exports={rateButton:"FinalPage_rateButton__3fon5"}},217:function(e,t){},219:function(e,t){},229:function(e,t){},231:function(e,t){},25:function(e,t,n){e.exports={screen:"Screen_screen__2uJH5",headerContainer:"Screen_headerContainer__3aY5G",header:"Screen_header__3xIOM",backIcon:"Screen_backIcon__1ZUXs",contentContainer:"Screen_contentContainer__1OTd9",content:"Screen_content__2dtTO",footerContainer:"Screen_footerContainer__1oCNZ",footer:"Screen_footer__31-vm",footerCentered:"Screen_footerCentered__1QxIS",withoutHeader:"Screen_withoutHeader__5Apxr",footerWithGradient:"Screen_footerWithGradient__3vBty",footerWithActions:"Screen_footerWithActions__184kk"}},258:function(e,t){},259:function(e,t){},264:function(e,t){},266:function(e,t){},273:function(e,t){},29:function(e,t,n){e.exports={spinner:"Spinner_spinner__3aH9W",hiddenSpinner:"Spinner_hiddenSpinner__11yS6",rings:"Spinner_rings__3SHlZ",ring:"Spinner_ring__20ERF",ringAnimation:"Spinner_ringAnimation__2ZvCu",ring1:"Spinner_ring1__1hz37",ring2:"Spinner_ring2__1tsve",ring3:"Spinner_ring3__1R5sb"}},292:function(e,t){},31:function(e,t,n){e.exports={header:"Mission_header__10j8s",headerActions:"Mission_headerActions__3zhqv",taskButton:"Mission_taskButton__1j7S1",taskButtonIcon:"Mission_taskButtonIcon__1NF2t",prevTaskButton:"Mission_prevTaskButton__-Zmqq",missionContent:"Mission_missionContent__28wio",missionFooter:"Mission_missionFooter__MPduP"}},34:function(e,t,n){e.exports={inventory:"Inventory_inventory__f4P-p",checkedIcon:"Inventory_checkedIcon__33YaI",inventoryImageUsed:"Inventory_inventoryImageUsed__39tC7",small:"Inventory_small__1lz41",large:"Inventory_large__2E6xZ",smallImage:"Inventory_smallImage__1eaBU",largeImage:"Inventory_largeImage__uNorE"}},348:function(e,t,n){},349:function(e,t,n){"use strict";n.r(t);var a,r=n(1),i=n.n(r),o=n(190),s=n.n(o),c=n(22),l=n(14),u=n(352),d=n(89),j=n(4),m=n(0),h=Object(r.createContext)({addAvatar:function(e,t){},avatars:new Map}),f=function(e){var t=e.children,n=Object(r.useState)(new Map),a=Object(j.a)(n,2),i=a[0],o=a[1];return Object(m.jsx)(h.Provider,{value:{addAvatar:function(e,t){o((function(n){return new Map(n.set(e,t))}))},avatars:i},children:t})},b=new u.a,p=function(e){var t=e.history,n=e.children;return Object(m.jsx)(l.c,{history:t,children:Object(m.jsx)(d.a,{client:b,children:Object(m.jsx)(f,{children:n})})})};!function(e){e.Game="/game",e.Home="/game/home",e.Profile="/game/profile",e.ProfileChangeAvatar="/game/profile/change_avatar",e.ProfileTeam="/game/profile/team",e.Contact="/game/contact",e.OnboardingPersonalize="/game/onboarding/personalize",e.OnboardingTeam="/game/onboarding/team",e.OnboardingCheckIn="/game/onboarding/checkin",e.OnboardingMainStory="/game/onboarding/main_story",e.Mission="/game/mission",e.MissionCompleted="/game/mission_completed",e.MissionStory="/game/mission_story",e.VrTask="/game/vr_task",e.ArTask="/game/ar_task",e.InventoryDetails="/game/inventory_details",e.ReceivedInventories="/game/received_inventories",e.FinalStory="/game/finishing/final_story",e.FinalPage="/game/finishing/final_page",e.FinalEvent="/game/finishing/final_event",e.Login="/game/login",e.Signup="/game/signup"}(a||(a={}));var v,O=[a.Home,a.Profile,a.ProfileChangeAvatar,a.ProfileTeam,a.Contact,a.OnboardingPersonalize,a.OnboardingTeam,a.OnboardingCheckIn,a.OnboardingMainStory,a.Mission,a.MissionCompleted,a.MissionStory,a.VrTask,a.ArTask,a.InventoryDetails,a.ReceivedInventories,a.FinalStory,a.FinalPage,a.FinalEvent],g=n(12),x=function(e){var t=e.children,n=e.to;return Object(m.jsx)(g.a,{to:n,children:t})},y=n(6),_=n.n(y),w=["title","titleId"];function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function S(e,t){var n=e.title,a=e.titleId,i=C(e,w);return r.createElement("svg",k({viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,v||(v=r.createElement("path",{d:"M14 1.41L12.59 0 7 5.59 1.41 0 0 1.41 5.59 7 0 12.59 1.41 14 7 8.41 12.59 14 14 12.59 8.41 7 14 1.41z"})))}var I,T=r.forwardRef(S),N=(n.p,n(64)),P=n.n(N),F=function(e){var t=e.title,n=e.icon,a=e.onClose,r=e.additionalClasses;return Object(m.jsxs)("div",{className:_()(P.a.titleContainer,r),children:[n&&Object(m.jsx)("div",{className:P.a.icon,children:n}),Object(m.jsx)("div",{className:P.a.title,children:t}),!!a&&Object(m.jsx)("button",{className:P.a.closeButton,onClick:a,children:Object(m.jsx)(T,{className:P.a.closeIcon})})]})},A=n(5),M=n(76),E=n.n(M);!function(e){e[e.Main=0]="Main",e[e.Secondary=1]="Secondary",e[e.Dark=2]="Dark"}(I||(I={}));var B,L=function(e){var t,n=e.title,a=e.onClick,r=e.type,i=e.additionalClasses;return Object(m.jsx)("button",{className:_()(E.a.button,i,(t={},Object(A.a)(t,E.a.main,r===I.Main),Object(A.a)(t,E.a.secondary,r===I.Secondary),Object(A.a)(t,E.a.dark,r===I.Dark),t)),onClick:a,children:n})},H=n(65),R=n.n(H),D=function(e){var t=e.children,n=e.name,a=e.checked,i=e.onChange,o=e.isValid,s=void 0===o||o,c=e.additionalClasses,l=Object(r.useState)(!s),u=Object(j.a)(l,2),d=u[0],h=u[1];Object(r.useEffect)((function(){return h(!s)}),[s]);return Object(m.jsxs)("label",{className:_()(R.a.checkboxContainer,c),htmlFor:"id_".concat(n),children:[Object(m.jsx)("input",{className:R.a.nativeCheckbox,type:"checkbox",id:"id_".concat(n),name:n,checked:a,onChange:function(e){i&&i(e),h(!1)}}),Object(m.jsx)("span",{className:_()(R.a.checkbox,Object(A.a)({},R.a.hasErrors,d))}),Object(m.jsx)("span",{className:R.a.label,children:t})]})},V=["title","titleId"];function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function W(e,t){var n=e.title,a=e.titleId,i=U(e,V);return r.createElement("svg",z({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,B||(B=r.createElement("path",{d:"M16 7H3.83l5.59-5.59L8 0 0 8l8 8 1.41-1.41L3.83 9H16V7z"})))}var G,Q=r.forwardRef(W),q=(n.p,n(60)),Z=n(25),Y=n.n(Z),K=function(e){var t,n=e.children,a=e.withoutHeader,r=void 0!==a&&a,i=e.footerWithGradient,o=void 0!==i&&i,s=e.footerWithActions,c=void 0!==s&&s,l=e.isFetching,u=void 0!==l&&l;return Object(m.jsxs)("div",{className:_()(Y.a.screen,(t={},Object(A.a)(t,Y.a.withoutHeader,r),Object(A.a)(t,Y.a.footerWithGradient,o),Object(A.a)(t,Y.a.footerWithActions,c),t)),children:[n,Object(m.jsx)(q.a,{isLoading:u})]})};K.Header=function(e){var t=e.backTo,n=e.onBack,a=e.children,r=Object(l.g)();return Object(m.jsx)("div",{className:Y.a.headerContainer,children:Object(m.jsxs)("div",{className:Y.a.header,children:[(t||n)&&Object(m.jsx)(Q,{className:Y.a.backIcon,onClick:function(){n&&n(),t&&r.push(t)}}),a]})})},K.Content=function(e){var t=e.children,n=e.additionalClasses;return Object(m.jsx)("div",{className:Y.a.contentContainer,children:Object(m.jsx)("div",{className:_()(Y.a.content,n),children:t})})},K.Footer=function(e){var t=e.children,n=e.centered,a=void 0!==n&&n,r=e.additionalClasses;return Object(m.jsx)("div",{className:Y.a.footerContainer,children:Object(m.jsx)("div",{className:_()(Y.a.footer,r,Object(A.a)({},Y.a.footerCentered,a)),children:t})})};var X=["title","titleId"];function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ee(e,t){var n=e.title,a=e.titleId,i=$(e,X);return r.createElement("svg",J({width:20,height:10,viewBox:"0 0 20 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,G||(G=r.createElement("path",{d:"M10.5416 3.33333C9.85831 1.39167 8.00831 0 5.83331 0C3.07498 0 0.833313 2.24167 0.833313 5C0.833313 7.75833 3.07498 10 5.83331 10C8.00831 10 9.85831 8.60833 10.5416 6.66667H14.1666V10H17.5V6.66667H19.1666V3.33333H10.5416ZM5.83331 6.66667C4.91665 6.66667 4.16665 5.91667 4.16665 5C4.16665 4.08333 4.91665 3.33333 5.83331 3.33333C6.74998 3.33333 7.49998 4.08333 7.49998 5C7.49998 5.91667 6.74998 6.66667 5.83331 6.66667Z",fill:"white"})))}var te,ne=r.forwardRef(ee),ae=(n.p,n(354)),re=n(39),ie=n.n(re),oe=n(48),se=n.n(oe),ce="access_token",le="refresh_token",ue="user_id",de=function(e,t){var n=se.a.AES.encrypt(e.accessToken,ce).toString(),a=se.a.AES.encrypt(e.refreshToken,le).toString();if(t){ie.a.set(ce,n,{expires:5}),ie.a.set(le,a,{expires:5});try{e.userId&&window.localStorage.setItem(ue,e.userId)}catch(r){}}else try{window.sessionStorage.setItem(ce,n),window.sessionStorage.setItem(le,a),e.userId&&window.sessionStorage.setItem(ue,e.userId)}catch(r){}},je=function(){var e=null;try{(e=ie.a.get(ce))||(e=window.sessionStorage.getItem(ce))}catch(t){}return e?se.a.AES.decrypt(e,ce).toString(se.a.enc.Utf8):null},me=function(){var e=window.localStorage.getItem(ue);return e||(e=window.sessionStorage.getItem(ue)),e},he=function(){window.sessionStorage.removeItem(ce),window.sessionStorage.removeItem(le),ie.a.remove(ce),ie.a.remove(le)},fe="is-registered",be=n(8),pe=n.n(be),ve=function(e){return pe.a.get("/login",{headers:{Authorization:"Basic ".concat(btoa("".concat(e.email.trim(),":").concat(e.password)))}}).then((function(e){var t=e.data;return ge(t)})).catch((function(e){throw xe(e.response.data)}))},Oe=function(e){return pe.a.get("/signup",{headers:{Authorization:"Basic ".concat(btoa("".concat(e.email.trim(),":").concat(e.password.trim())))}}).then((function(e){var t=e.data;return ge(t)})).catch((function(e){throw xe(e.response.data)}))},ge=function(e){return{accessToken:e["access-token"],refreshToken:e["refresh-token"],userId:e["public-id"]}},xe=function(e){return{message:e.message,errorCode:e.error_code}},ye=function(){var e=Object(l.g)(),t=Object(r.useState)([]),n=Object(j.a)(t,2),i=n[0],o=n[1],s=Object(ae.a)(ve,{onError:function(e){o([we(e.errorCode)])}}),c=Object(ae.a)(Oe,{onError:function(e){o([we(e.errorCode)])}});return{isAuthStoreFetching:s.isLoading||c.isLoading,login:function(t){o([]);var n=_e(t.credential);0===n.length?s.mutate(t.credential,{onSuccess:function(n){de(n,t.isRememberChecked),e.push(a.Game)}}):o(n)},signup:function(t){o([]);var n=_e(t.credential);t.isPolicyChecked||n.push({field:"policy",message:"Read and agree with privacy policy before sign in"}),0===n.length?c.mutate(t.credential,{onSuccess:function(n){de(n,t.isRememberChecked),function(){try{window.localStorage.setItem(fe,"true")}catch(e){}}(),e.push(a.Game)}}):o(n)},errors:i}},_e=function(e){var t=[],n=e.email.trim();0===n.length?t.push({field:"email",message:"Please enter email"}):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||t.push({field:"email",message:"Please enter a valid email address"});var a=e.password.trim();return 0===a.length?t.push({field:"password",message:"Please enter password"}):a.length<8&&t.push({field:"password",message:"Password must contain at least 8 characters."}),t},we=function(e){switch(e){case 2:return{field:"email",message:"Your email is not included in the list of participants. If you want to learn more about the game and how to participate, please visit https://promo.page"};case 3:return{field:"email",message:"Please sing up"};case 4:return{field:"password",message:"Incorrect password"};case 5:return{field:"email",message:"Already signed up. Please login"};default:return{field:"email",message:"Something wrong"}}},ke=n(77),Ce=n.n(ke);!function(e){e[e.error=0]="error",e[e.warning=1]="warning",e[e.info=2]="info"}(te||(te={}));var Se,Ie=function(e){var t,n=e.type,a=e.children;return Object(m.jsx)("div",{className:_()(Ce.a.message,(t={},Object(A.a)(t,Ce.a.error,n===te.error),Object(A.a)(t,Ce.a.warning,n===te.warning),Object(A.a)(t,Ce.a.info,n===te.info),t)),children:a})},Te=n(192),Ne=n.n(Te),Pe=function(e){var t=e.label,n=e.htmlFor;return Object(m.jsx)("label",{className:Ne.a.label,htmlFor:n,children:t})},Fe=["title","titleId"];function Ae(){return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Me(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ee(e,t){var n=e.title,a=e.titleId,i=Me(e,Fe);return r.createElement("svg",Ae({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,Se||(Se=r.createElement("path",{d:"M12 7C14.76 7 17 9.24 17 12C17 12.65 16.87 13.26 16.64 13.83L19.56 16.75C21.07 15.49 22.26 13.86 22.99 12C21.26 7.61 16.99 4.5 11.99 4.5C10.59 4.5 9.25 4.75 8.01 5.2L10.17 7.36C10.74 7.13 11.35 7 12 7ZM2 4.27L4.28 6.55L4.74 7.01C3.08 8.3 1.78 10.02 1 12C2.73 16.39 7 19.5 12 19.5C13.55 19.5 15.03 19.2 16.38 18.66L16.8 19.08L19.73 22L21 20.73L3.27 3L2 4.27ZM7.53 9.8L9.08 11.35C9.03 11.56 9 11.78 9 12C9 13.66 10.34 15 12 15C12.22 15 12.44 14.97 12.65 14.92L14.2 16.47C13.53 16.8 12.79 17 12 17C9.24 17 7 14.76 7 12C7 11.21 7.2 10.47 7.53 9.8ZM11.84 9.02L14.99 12.17L15.01 12.01C15.01 10.35 13.67 9.01 12.01 9.01L11.84 9.02Z"})))}var Be,Le=r.forwardRef(Ee),He=(n.p,["title","titleId"]);function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function De(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ve(e,t){var n=e.title,a=e.titleId,i=De(e,He);return r.createElement("svg",Re({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,Be||(Be=r.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z"})))}var ze,Ue,We=r.forwardRef(Ve),Ge=(n.p,n(40)),Qe=n.n(Ge),qe=function(e){var t,n=e.type,a=void 0===n?"text":n,i=e.inputRef,o=e.value,s=e.onChange,c=e.onBlur,l=e.placeholder,u=e.label,d=e.name,h=e.isValid,f=void 0===h||h,b=e.disabled,p=void 0!==b&&b,v=e.addonAfter,O=e.additionalClasses,g=Object(r.useState)(!1),x=Object(j.a)(g,2),y=x[0],w=x[1],k=y?We:Le;return Object(m.jsxs)(m.Fragment,{children:[u&&Object(m.jsx)(Pe,{htmlFor:"id_".concat(d),label:u}),Object(m.jsxs)("div",{className:_()(Qe.a.inputContainer,O),children:[Object(m.jsx)("input",{className:_()(Qe.a.textInput,(t={},Object(A.a)(t,Qe.a.hasErrors,!f),Object(A.a)(t,Qe.a.disabled,p),Object(A.a)(t,Qe.a.password,"password"===a),t)),ref:i,value:o,onChange:function(e){s&&s(e)},onBlur:function(e){c&&c(e)},type:y?"text":a,placeholder:l,disabled:p,id:"id_".concat(d)}),"password"===a&&Object(m.jsx)(k,{onClick:function(){return w((function(e){return!e}))},className:Qe.a.passwordIcon}),v&&Object(m.jsx)("div",{className:Qe.a.addonAfter,children:v})]})]})},Ze=function(e){var t=e.errors,n=e.email,a=e.onEmailChange,i=e.password,o=e.onPasswordChange,s=Object(r.useCallback)((function(e){a(e.target.value)}),[a]),c=Object(r.useCallback)((function(e){o(e.target.value)}),[o]);return Object(m.jsxs)(m.Fragment,{children:[t.length>0&&Object(m.jsx)(Ie,{type:te.error,children:t.map((function(e,t){var n=e.message;return Object(m.jsx)("span",{children:n},t)}))}),Object(m.jsx)(qe,{value:n,onChange:s,label:"email",name:"email",isValid:!t.find((function(e){return"email"===e.field})),additionalClasses:"verticalSpace"}),Object(m.jsx)(qe,{value:i,onChange:c,type:"password",label:"password",name:"password",isValid:!t.find((function(e){return"password"===e.field})),additionalClasses:"verticalSpace"})]})},Ye=n(193),Ke=n.n(Ye),Xe=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(""),s=Object(j.a)(o,2),c=s[0],l=s[1],u=Object(r.useState)(!1),d=Object(j.a)(u,2),h=d[0],f=d[1],b=ye(),p=b.login,v=b.errors,O=b.isAuthStoreFetching,g=Object(r.useCallback)((function(){p({credential:{email:n,password:c},isRememberChecked:h})}),[n,h,p,c]);return Object(m.jsxs)(K,{footerWithGradient:!0,isFetching:O,children:[Object(m.jsx)(K.Header,{children:Object(m.jsx)(F,{title:"Log In",icon:Object(m.jsx)(ne,{})})}),Object(m.jsxs)(K.Content,{children:[Object(m.jsx)(Ze,{errors:v,email:n,onEmailChange:function(e){return i(e)},password:c,onPasswordChange:function(e){return l(e)}}),Object(m.jsx)(D,{checked:h,onChange:function(e){return f(e.target.checked)},name:"remember",additionalClasses:"verticalSpace",children:"Remember me on this device"}),Object(m.jsx)("p",{className:Ke.a.text,children:"If you forgot your password please contact admin@questmission.com"}),Object(m.jsx)(x,{to:a.Signup,children:"Don't have an account yet?"})]}),Object(m.jsx)(K.Footer,{centered:!0,children:Object(m.jsx)(L,{title:"Login",onClick:g,type:I.Main})})]})},Je=n(91),$e=n.n(Je),et=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],i=t[1],o=Object(r.useState)(""),s=Object(j.a)(o,2),c=s[0],l=s[1],u=Object(r.useState)(!1),d=Object(j.a)(u,2),h=d[0],f=d[1],b=Object(r.useState)(!1),p=Object(j.a)(b,2),v=p[0],O=p[1],g=ye(),y=g.signup,_=g.errors,w=g.isAuthStoreFetching,k=Object(r.useCallback)((function(){y({credential:{email:n,password:c},isPolicyChecked:h,isRememberChecked:v})}),[n,h,v,c,y]);return Object(m.jsxs)(K,{footerWithGradient:!0,isFetching:w,children:[Object(m.jsx)(K.Header,{children:Object(m.jsx)(F,{title:"Sign Up",icon:Object(m.jsx)(ne,{})})}),Object(m.jsxs)(K.Content,{children:[Object(m.jsx)(Ze,{errors:_,email:n,onEmailChange:function(e){return i(e)},password:c,onPasswordChange:function(e){return l(e)}}),Object(m.jsx)(x,{to:a.Login,children:"Already have an account?"}),Object(m.jsxs)("div",{className:$e.a.additionalInfo,children:[Object(m.jsxs)(D,{checked:h,onChange:function(e){return f(e.target.checked)},name:"policy",isValid:!_.find((function(e){return"policy"===e.field})),additionalClasses:$e.a.info,children:["Agree with ",Object(m.jsx)("a",{href:"https://questmission.com/privacy-policy",children:"Privacy Policy"})]}),Object(m.jsx)(D,{checked:v,onChange:function(e){return O(e.target.checked)},name:"remember",additionalClasses:$e.a.info,children:"Remember me on this device"})]})]}),Object(m.jsx)(K.Footer,{centered:!0,children:Object(m.jsx)(L,{title:"Sign Up",onClick:k,type:I.Main})})]})},tt=n(126),nt=n(353),at=n(21),rt=n.n(at);!function(e){e[e.NotStarted=0]="NotStarted",e[e.Solved=1]="Solved",e[e.InProgress=2]="InProgress",e[e.Future=3]="Future"}(ze||(ze={})),function(e){e.Vr="vr_gallery",e.Ar="ar_video_on_marker",e.Image="image",e.Text="text",e.TextAndImage="text_and_image",e.Url="text_url",e.Video="video"}(Ue||(Ue={}));var it,ot=function(){return pe.a.get("/self").then((function(e){var t=e.data;return dt(t)})).catch((function(e){throw e.response.data}))},st=function(e){var t=e.key,n=e.value,a="boolean"===typeof n?"value_bool":"value_str";return pe.a.patch("/self",Object(A.a)({key:t},a,n)).catch((function(e){throw e.response.data}))},ct=function(e){var t=e.key,n=e.value;return pe.a.patch("/self",{key:t,value_str_old:n.old,value_str:n.new}).catch((function(e){throw e.response.data}))},lt=function(){return pe.a.get("/games/self/final-questionaire").then((function(e){return e.data.questionnaire_url})).catch((function(e){throw e.response.data}))},ut=function(){return pe.a.patch("/self",{key:"final_page_viewed",value_bool:!0}).catch((function(e){throw e.response.data}))},dt=function(e){return{gameName:e.game_name,avatarUrl:e.avatar,isProfileCreated:e.profile_set,isBotConnected:e.bot_connected,isMainStoryViewed:e.main_story_viewed,isFinalStoryViewed:e.final_story_viewed,isFinalPageViewed:e.final_page_viewed,nickname:e.nickname,email:e.email,isNickNameSet:e.nickname_set,linkToHelp:e.assistant_url,linkToBot:e.bot_chat_url,currentDayNumber:e.day_number,finalEventStartTime:e.final_event_start_time&&rt()(e.final_event_start_time),days:e.days?e.days.map((function(t,n){return{isDailyStoryViewed:t.day_story_viewed,isPasscodeEntered:t.passcode_entered,status:jt(t,n+1,e.day_number),startTime:t.begin_daytime&&rt()(t.begin_daytime),dayNumber:n+1,totalTasks:t.total_tasks,isTeamTaskSolved:t.team_task_solved,isTeamTaskCompletionViewed:t.team_task_completion_viewed,inventoryItems:t.inventory_items?t.inventory_items.map((function(e){return{isAvailable:e.available,isUsed:t.team_task_solved,name:e.name,resource:e.resource}})):[],tasks:t.tasks?t.tasks.map((function(e){return{id:e.id,type:e.content_type,isTeamTask:e.is_team_mission,areHintsAvailable:e.wrong_answer_attempts>0&&e.hints_total_number>e.hints_used,hints:e.hints,hintsTotal:e.hints_total_number,hintsUsed:e.hints_used,resources:e.resources,isSkipped:e.skipped,isSolved:e.solved,text:e.text}})):[]}})):[]}},jt=function(e,t,n){var a=e.begin_daytime?rt()(e.begin_daytime):null;return 0===n&&1===t||a&&rt()()<a?ze.NotStarted:e.team_task_solved&&n===t?!!e.tasks&&e.tasks.every((function(e){return e.solved}))?ze.Solved:ze.InProgress:n===t?ze.InProgress:n<t?ze.Future:ze.Solved},mt={gameName:"",avatarUrl:"",isProfileCreated:!1,isBotConnected:!1,isMainStoryViewed:!1,isFinalStoryViewed:!1,isFinalPageViewed:!1,nickname:"",email:"",isNickNameSet:!1,linkToBot:"",linkToHelp:"",days:[],currentDayNumber:0,finalEventStartTime:rt()()},ht={isDailyStoryViewed:!1,isPasscodeEntered:!1,status:ze.NotStarted,startTime:rt()(),dayNumber:0,tasks:[],inventoryItems:[],totalTasks:0,isTeamTaskSolved:!1,isTeamTaskCompletionViewed:!1},ft=function(){var e=Object(nt.a)("game",ot,{staleTime:3e4}),t=e.data;return{isGameStoreFetching:e.isFetching,gameState:t||mt,currentDay:t?t.days[0===t.currentDayNumber?0:t.currentDayNumber-1]:ht,areAllTasksSolved:!!t&&t.days.every((function(e){return e.status===ze.Solved})),allInventoryItems:t?t.days.reduce((function(e,t){return[].concat(Object(tt.a)(e),Object(tt.a)(t.inventoryItems.filter((function(e){return e.isAvailable}))))}),[]):[]}},bt=function(){var e=Object(l.g)(),t=ft(),n=t.gameState;return t.isGameStoreFetching?Object(m.jsx)(K,{isFetching:!0,withoutHeader:!0,children:Object(m.jsx)(K.Content,{})}):n.isProfileCreated?n.isBotConnected?n.isMainStoryViewed?(e.push(a.Home),null):(e.push(a.OnboardingMainStory),null):(e.push(a.OnboardingTeam),null):(e.push(a.OnboardingPersonalize),null)},pt=["title","titleId"];function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ot(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gt(e,t){var n=e.title,a=e.titleId,i=Ot(e,pt);return r.createElement("svg",vt({viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,it||(it=r.createElement("path",{d:"M7 7A3.332 3.332 0 107 .333 3.332 3.332 0 107 7zm0 1.667C4.775 8.667.333 9.783.333 12v1.667h13.334V12c0-2.217-4.442-3.333-6.667-3.333z"})))}var xt,yt=r.forwardRef(gt),_t=(n.p,n(41)),wt=n.n(_t);!function(e){e[e.Round=0]="Round",e[e.RoundBig=1]="RoundBig",e[e.Square=2]="Square"}(xt||(xt={}));var kt,Ct=function(e){var t,n,a=e.image,r=e.type,i=e.onClick,o=e.additionalClasses;return a?Object(m.jsx)("img",{src:a,alt:"",onClick:i,className:_()(wt.a.avatar,o,(t={},Object(A.a)(t,wt.a.round,r===xt.Round),Object(A.a)(t,wt.a.square,r===xt.Square),t))}):Object(m.jsx)("span",{className:_()(wt.a.avatarIcon,o,(n={},Object(A.a)(n,wt.a.round,r===xt.Round),Object(A.a)(n,wt.a.roundBig,r===xt.RoundBig),Object(A.a)(n,wt.a.square,r===xt.Square),n))})},St=n(61),It=function(e){var t=Object(r.useContext)(h),n=t.addAvatar,a=t.avatars;return{isAvatarStoreFetching:Object(nt.a)(["avatar",e],(function(){return Object(St.a)(e)}),{staleTime:1/0,enabled:!!e,onSuccess:function(t){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){a.result&&"string"===typeof a.result&&n(e,a.result)}}}).isFetching,avatar:a.get(e)}},Tt=n(194),Nt=n.n(Tt),Pt=function(e){var t=e.avatarUrl,n=e.type,a=e.isSelected,r=void 0!==a&&a,i=e.onClick,o=It(t),s=o.isAvatarStoreFetching,c=o.avatar;return Object(m.jsx)(Ct,{image:c,onClick:i,type:n,additionalClasses:_()(Object(A.a)({},Nt.a.currentAvatar,!s&&r))})},Ft=function(){var e=Object(d.b)(),t=ft(),n=t.gameState,a=t.isGameStoreFetching,r=Object(nt.a)("avatars",St.b,{staleTime:1/0}),i=r.data,o=r.isFetching,s=Object(ae.a)(st,{onSuccess:function(){e.invalidateQueries("game"),e.invalidateQueries("teamPlayers")}});return{isAvatarListStoreFetching:a||o||s.isLoading,avatarUrlList:i||[],currentAvatar:n.avatarUrl,changeAvatar:function(e){s.mutate({key:"avatar",value:e})}}},At=n(195),Mt=n.n(At),Et=function(){var e=Ft(),t=e.avatarUrlList,n=e.currentAvatar,a=e.changeAvatar;return Object(m.jsx)("div",{className:Mt.a.avatarList,children:t.map((function(e,t){return Object(m.jsx)(Pt,{avatarUrl:e,type:xt.Square,isSelected:n===e,onClick:function(){return a(e)}},t)}))})},Bt=function(){var e=Object(d.b)(),t=Object(l.g)(),n=Object(r.useState)(!1),i=Object(j.a)(n,2),o=i[0],s=i[1],c=ft(),u=c.gameState,m=c.isGameStoreFetching,h=It(u.avatarUrl),f=h.avatar,b=h.isAvatarStoreFetching,p=Object(ae.a)(st,{onSuccess:function(){e.invalidateQueries("game"),e.invalidateQueries("teamPlayers")}}),v=Object(ae.a)(ct,{onSuccess:function(){s(!0),e.invalidateQueries("game")},onError:function(){y({field:"oldPassword",message:"Incorrect password"})}}),O=Object(r.useState)(null),g=Object(j.a)(O,2),x=g[0],y=g[1];return{isProfileStoreFetching:m||b||p.isLoading||v.isLoading,email:u.email,nickname:u.nickname,changeNickname:function(e){var t=e.trim();y(null),0===t.length?y({field:"nickname",message:"Please enter username"}):t.length>30?y({field:"nickname",message:"Username must be less than 30 characters"}):p.mutate({key:"nickname",value:t})},avatar:f,markProfileCreated:function(){p.mutateAsync({key:"profile_set",value:!0}).then((function(){t.push(a.Game)}))},changePassword:function(e,t,n){if(y(null),e.length<8)y({field:"oldPassword",message:"Password must contain at least 8 characters."});else{var a=t.trim();0!==a.length?a.length<8?y({field:"newPassword",message:"Password must contain at least 8 characters."}):v.mutateAsync({key:"password",value:{old:e,new:a}}).then((function(){return n()})):y({field:"newPassword",message:"Password should not be empty"})}},passwordWasChanged:o,error:x}},Lt=n(196),Ht=n.n(Lt),Rt=function(){var e=Object(r.useRef)(null),t=Bt(),n=t.nickname,a=t.changeNickname,i=t.markProfileCreated,o=t.error,s=t.isProfileStoreFetching,c=Ft().isAvatarListStoreFetching,l=Object(r.useState)(n),u=Object(j.a)(l,2),d=u[0],h=u[1];Object(r.useEffect)((function(){h(n)}),[n]);var f=function(){a(d)};return Object(m.jsxs)(K,{footerWithGradient:!0,isFetching:s||c,children:[Object(m.jsx)(K.Header,{children:Object(m.jsx)(F,{title:"Personalize",icon:Object(m.jsx)(yt,{className:Ht.a.personIcon})})}),Object(m.jsxs)(K.Content,{children:[!!o&&Object(m.jsx)(Ie,{type:te.error,children:o.message}),Object(m.jsx)("form",{onSubmit:function(t){t.preventDefault(),f(),e&&e.current&&e.current.blur()},children:Object(m.jsx)(qe,{value:d,inputRef:e,onChange:function(e){h(e.target.value)},onBlur:f,isValid:"nickname"!==(null===o||void 0===o?void 0:o.field),label:"Username",name:"nickname",additionalClasses:"verticalSpace"})}),Object(m.jsx)(Pe,{label:"Avatar"}),Object(m.jsx)(Et,{})]}),Object(m.jsx)(K.Footer,{centered:!0,children:Object(m.jsx)(L,{title:"Continue",onClick:function(){i()},type:I.Main})})]})},Dt=["title","titleId"];function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function zt(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ut(e,t){var n=e.title,a=e.titleId,i=zt(e,Dt);return r.createElement("svg",Vt({viewBox:"0 0 20 10",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,kt||(kt=r.createElement("path",{d:"M10 5.625c1.358 0 2.558.325 3.533.75.9.4 1.467 1.3 1.467 2.275V10H5V8.658a2.47 2.47 0 011.467-2.275A8.7 8.7 0 0110 5.625zm-6.667.208C4.25 5.833 5 5.083 5 4.167 5 3.25 4.25 2.5 3.333 2.5c-.916 0-1.666.75-1.666 1.667 0 .916.75 1.666 1.666 1.666zm.942.917a5.819 5.819 0 00-.942-.083c-.825 0-1.608.175-2.316.483A1.676 1.676 0 000 8.692V10h3.75V8.658c0-.691.192-1.341.525-1.908zm12.392-.917c.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667C15.75 2.5 15 3.25 15 4.167c0 .916.75 1.666 1.667 1.666zM20 8.692c0-.675-.4-1.275-1.017-1.542a5.792 5.792 0 00-2.316-.483c-.325 0-.634.033-.942.083a3.75 3.75 0 01.525 1.908V10H20V8.692zM10 0c1.383 0 2.5 1.117 2.5 2.5S11.383 5 10 5a2.497 2.497 0 01-2.5-2.5C7.5 1.117 8.617 0 10 0z"})))}var Wt,Gt,Qt=r.forwardRef(Ut),qt=(n.p,n(78)),Zt=n.n(qt),Yt=function(e){var t=e.currentTeamName,n=e.changeTeamName,a=e.setCurrentTeamName,i=e.teamPlayers,o=e.isCurrentUserCaptain,s=e.error,c=Object(r.useRef)(null);return Object(m.jsxs)("div",{children:[!!s&&Object(m.jsx)(Ie,{type:te.error,children:s.message}),Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault(),n(t),c&&c.current&&c.current.blur()},children:Object(m.jsx)(qe,{inputRef:c,value:t,onChange:function(e){a(e.target.value)},onBlur:function(){n(t)},disabled:!o,isValid:"teamName"!==(null===s||void 0===s?void 0:s.field),label:"Team Name",name:"teamName",additionalClasses:"verticalSpace"})}),i.map((function(e){var t=e.id,n=e.isCaptain,a=e.nickname,r=e.avatarUrl,i=e.email;return Object(m.jsxs)("div",{className:Zt.a.player,children:[Object(m.jsx)(Pt,{avatarUrl:r,type:xt.Round}),Object(m.jsxs)("div",{className:Zt.a.playerInfo,children:[Object(m.jsx)("div",{className:Zt.a.nickname,children:"".concat(a).concat(n?" - Captain":"")}),Object(m.jsx)("div",{className:Zt.a.email,children:i})]})]},t)}))]})},Kt=function(){return pe.a.get("/teams/self").then((function(e){var t=e.data;return Xt(t)})).catch((function(e){throw e.response.data}))},Xt=function(e){return{name:e.name,days:e.days?e.days.map((function(e){return{isTeamMissionSolved:e.daily_mission_solved,totalTasks:e.total_tasks,totalTasksSolved:e.total_tasks_solved}})):[]}},Jt=function(){return pe.a.get("/teams/self/players").then((function(e){var t=e.data;return $t(t)})).catch((function(e){throw e.response.data}))},$t=function(e){var t=e.capitan,n=t?t["public-id"]:null;return{captainId:n,players:e.players.map((function(e){return{id:e["public-id"],isCaptain:e["public-id"]===n,nickname:e.nickname,avatarUrl:e.avatar,email:e.email,chatUrl:e.chat_url}}))}},en=function(e){return pe.a.patch("/teams/self",{key:e.key,value_str:e.value}).catch((function(e){throw e.response.data}))},tn=function(){var e=Object(d.b)(),t=ft(),n=t.gameState,a=t.isGameStoreFetching,i=Object(r.useState)(null),o=Object(j.a)(i,2),s=o[0],c=o[1],l=Object(nt.a)("team",Kt,{staleTime:3e4}),u=l.data,m=l.isFetching,h=Object(nt.a)("teamPlayers",Jt,{staleTime:1/0}),f=h.data,b=h.isFetching,p=Object(ae.a)(en,{onSuccess:function(){return e.invalidateQueries("team")}}),v=function(e){var t=e.trim(),n=null;return 0===t.length&&(n={field:"teamName",message:"Team name should not be empty"}),t.length>30&&(n={field:"teamName",message:"Team name must be less than 30 characters"}),new Promise((function(e,a){n?a(n):e(t)}))};return{isTeamStoreFetching:m||b||a||p.isLoading,teamName:(null===u||void 0===u?void 0:u.name)||"",progress:u?nn(u,n.currentDayNumber-1):0,changeTeamName:function(e){var t=e.trim();v(t).then((function(e){c(null),p.mutate({key:"name",value:e})})).catch((function(e){c(e)}))},validateTeamName:v,teamPlayers:f?f.players:[],isCurrentUserCaptain:!f||!f.captainId||f.captainId===me(),error:s}},nn=function(e,t){var n=e.days[t];return n?Math.floor(n.totalTasksSolved/n.totalTasks*100):0},an=n(197),rn=n.n(an),on=function(){var e=Object(l.g)(),t=tn(),n=t.teamName,i=t.changeTeamName,o=t.validateTeamName,s=t.teamPlayers,c=t.isCurrentUserCaptain,u=t.error,d=t.isTeamStoreFetching,h=Object(r.useState)(""),f=Object(j.a)(h,2),b=f[0],p=f[1];Object(r.useEffect)((function(){p(n)}),[n]);return Object(m.jsxs)(K,{footerWithGradient:!0,isFetching:d,children:[Object(m.jsx)(K.Header,{children:Object(m.jsx)(F,{title:"Meet the team!",icon:Object(m.jsx)(Qt,{className:rn.a.teamIcon})})}),Object(m.jsxs)(K.Content,{children:[Object(m.jsx)(Ie,{type:te.warning,children:"Welcome, Awesome One. Meet your team of great people. Get in touch with them, via any appropriate means (just please do not use smoke signals as they take waaay too long and pollution is real btw!). And, first things first: come up with a cool, smart, fun name for your team! Success is created. Together!"}),Object(m.jsx)(Yt,{currentTeamName:b,changeTeamName:i,setCurrentTeamName:p,teamPlayers:s,isCurrentUserCaptain:c,error:u})]}),Object(m.jsx)(K.Footer,{centered:!0,children:Object(m.jsx)(L,{title:"Continue",onClick:function(){o(b).then((function(){e.push(a.OnboardingCheckIn)})).catch((function(){}))},type:I.Main})})]})},sn=n(79),cn=n.n(sn),ln=function(e){var t=e.mainText,n=e.additionalText,a=e.additionalClasses,r=e.icon;return Object(m.jsxs)("div",{className:_()(cn.a.content,a),children:[r&&Object(m.jsx)("span",{className:cn.a.icon,children:r}),t&&Object(m.jsx)("h2",{className:cn.a.title,children:t}),t&&Object(m.jsx)("p",{className:cn.a.text,children:n})]})},un=["title","titleId"];function dn(){return(dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function jn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mn(e,t){var n=e.title,a=e.titleId,i=jn(e,un);return r.createElement("svg",dn({viewBox:"0 0 88 88",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,Wt||(Wt=r.createElement("rect",{width:88,height:88,rx:44,fill:"#FFDE89"})),Gt||(Gt=r.createElement("path",{d:"M58.666 25.667H29.334c-2.016 0-3.648 1.65-3.648 3.666l-.018 33L33 55h25.666a3.677 3.677 0 003.667-3.667v-22a3.677 3.677 0 00-3.666-3.666zm-3.666 22H33V44h22v3.667zm0-5.5H33V38.5h22v3.667zm0-5.5H33V33h22v3.667z",fill:"#1D2360"})))}var hn,fn=r.forwardRef(mn),bn=(n.p,function(){var e=Object(l.g)(),t=ft(),n=t.gameState,r=t.isGameStoreFetching;return Object(m.jsxs)(K,{footerWithGradient:!0,isFetching:r,children:[Object(m.jsx)(K.Content,{children:Object(m.jsx)(ln,{icon:Object(m.jsx)(fn,{}),mainText:"Check In",additionalText:"Your journey has begun. Your first mission - should you choose to accept it - is to inform Mission HQ that you are ALL IN."})}),Object(m.jsx)(K.Footer,{centered:!0,children:Object(m.jsx)(L,{title:n.isBotConnected?"Continue":"Check-in here",onClick:function(){n.isBotConnected?e.push(a.Game):window.open(n.linkToBot)},type:I.Main})})]})}),pn=function(){return pe.a.get("/games/self/main-story").then((function(e){var t=e.data;return gn(t)})).catch((function(e){throw e.response.data}))},vn=function(){return pe.a.get("/games/self/final-story").then((function(e){var t=e.data;return gn(t)})).catch((function(e){throw e.response.data}))},On=function(){return pe.a.get("/games/self/final-event").then((function(e){var t=e.data;return xn(t)})).catch((function(e){throw e.response.data}))},gn=function(e){return{pages:e.pages.map((function(e){return{text:e.text,resource:e.resource_url}}))}},xn=function(e){return{text:e.text,resource:e.resource_url,externalLink:e.external_link_url}},yn=function(){return pe.a.patch("/self",{key:"viewed_main_story",value_bool:!0}).catch((function(e){throw e.response.data}))},_n=function(e){return pe.a.patch("/self/day/".concat(e),{key:"day_story_viewed",value_bool:!0}).catch((function(e){throw e.response.data}))},wn=function(){return pe.a.patch("/self",{key:"final_story_viewed",value_bool:!0}).catch((function(e){throw e.response.data}))};!function(e){e[e.Main=0]="Main",e[e.Daily=1]="Daily",e[e.Final=2]="Final",e[e.FinalEvent=3]="FinalEvent"}(hn||(hn={}));var kn,Cn=function(e,t){var n=Object(d.b)(),r=Object(l.g)(),i=ft().currentDay,o=Object(nt.a)("main-story",pn,{staleTime:1/0,enabled:e===hn.Main}),s=o.data,c=o.isFetching,u=Object(nt.a)(["daily-story",t],(function(){return function(e){return e?pe.a.get("/games/self/daily-story/".concat(e)).then((function(e){var t=e.data;return gn(t)})).catch((function(e){throw e.response.data})):pe.a.get("/games/self/daily-story").then((function(e){var t=e.data;return gn(t)})).catch((function(e){throw e.response.data}))}(t)}),{staleTime:1/0,enabled:e===hn.Daily}),j=u.data,m=u.isFetching,h=Object(nt.a)("final-story",vn,{staleTime:1/0,enabled:e===hn.Final}),f=h.data,b=h.isFetching,p=Object(nt.a)("final-event",On,{staleTime:1/0,enabled:e===hn.FinalEvent}),v=p.data,O=p.isFetching,g=Object(ae.a)(yn,{onSuccess:function(){n.invalidateQueries("game"),r.push(a.Home)}}),x=Object(ae.a)(_n,{onSuccess:function(){n.invalidateQueries("game"),n.invalidateQueries(["daily-story",i.dayNumber]),r.push(a.Mission)}}),y=Object(ae.a)(wn,{onSuccess:function(){n.invalidateQueries("game"),n.invalidateQueries("final-story"),r.push(a.Home)}});return{isStoryStoreFetching:c||m||b||O||g.isLoading||x.isLoading||y.isLoading,mainStory:s||null,dailyStory:j||null,finalStory:f||null,finalEvent:v||null,markMainDailyStoryViewed:function(){g.mutate()},markDailyStoryViewed:function(){i.dayNumber===t&&i.status!==ze.Solved?x.mutate(i.dayNumber):r.push(a.Home)},markFinalViewed:function(){y.mutate()}}},Sn=n(49),In=n.n(Sn),Tn=function(e){var t=e.items,n=e.activeIndex,a=e.setActiveIndex,r=e.onLastItem,i=e.nextItemButtonTitle,o=e.lastItemButtonTitle;return Object(m.jsxs)("div",{className:In.a.carouselControls,children:[Object(m.jsx)("div",{className:In.a.carouselDots,children:t.length>1&&t.map((function(e,t){return Object(m.jsx)("div",{className:_()(In.a.carouselDot,Object(A.a)({},In.a.activeDot,n===t)),onClick:function(){return a(t)}},t)}))}),Object(m.jsx)("div",{className:In.a.carouselButtons,children:Object(m.jsx)(L,{title:n===t.length-1?o:i,type:I.Main,onClick:r,additionalClasses:In.a.carouselButton})})]})},Nn=n(121),Pn=n.n(Nn),Fn=function(e){var t=e.url,n=e.additionalClasses,a=function(e){var t=Object(r.useState)(null),n=Object(j.a)(t,2),a=n[0],i=n[1];return{isFetching:Object(nt.a)(["resourceUrl",e],(function(){return Object(St.c)(e)}),{refetchOnWindowFocus:!1,enabled:!!e,onSuccess:function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){t.result&&"string"===typeof t.result&&i(t.result)}}}).isFetching,resourceUrl:a}}(t),i=a.isFetching,o=a.resourceUrl;return i||!o?Object(m.jsx)("div",{className:_()(Pn.a.placeholder,n)}):Object(m.jsx)("img",{src:o,className:_()(Pn.a.image,n),alt:""})},An=n(198),Mn=n.n(An),En=function(e){var t=e.pages,n=e.isFetching,a=e.onStart,i=e.onClose,o=Object(r.useState)(0),s=Object(j.a)(o,2),c=s[0],l=s[1];return Object(m.jsxs)(K,{withoutHeader:!0,footerWithGradient:!0,isFetching:n,children:[Object(m.jsxs)(K.Content,{children:[Object(m.jsx)(F,{title:"Hello, Agent!",onClose:i}),t.map((function(e,t){return Object(m.jsx)(Bn,{page:e,hidden:t!==c},t)}))]}),Object(m.jsx)(K.Footer,{centered:!0,children:Object(m.jsx)(Tn,{items:t,activeIndex:c,setActiveIndex:l,onLastItem:function(){c<t.length-1?l((function(e){return e+1})):a&&a()},nextItemButtonTitle:"Next",lastItemButtonTitle:"Start"})})]})},Bn=function(e){var t=e.page;return e.hidden?null:Object(m.jsxs)(m.Fragment,{children:[t.resource&&Object(m.jsx)(Fn,{url:t.resource}),Object(m.jsx)("div",{className:Mn.a.pageText,children:t.text})]})},Ln=function(){var e=Object(l.g)(),t=Cn(hn.Main),n=t.mainStory,r=t.markMainDailyStoryViewed,i=t.isStoryStoreFetching;return Object(m.jsx)(En,{pages:n?n.pages:[],isFetching:i,onStart:function(){r()},onClose:function(){return e.push(a.Home)}})},Hn=["title","titleId"];function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Dn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vn(e,t){var n=e.title,a=e.titleId,i=Dn(e,Hn);return r.createElement("svg",Rn({viewBox:"0 0 6 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,kn||(kn=r.createElement("path",{d:"M1.667 0l-.94.94L3.78 4 .727 7.06l.94.94 4-4-4-4z"})))}var zn,Un=r.forwardRef(Vn),Wn=(n.p,["title","titleId"]);function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Qn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qn(e,t){var n=e.title,a=e.titleId,i=Qn(e,Wn);return r.createElement("svg",Gn({viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,zn||(zn=r.createElement("path",{d:"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zM8 15l-5-5 1.41-1.41L8 12.17l7.59-7.59L17 6l-9 9z"})))}var Zn,Yn=r.forwardRef(qn),Kn=(n.p,["title","titleId"]);function Xn(){return(Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Jn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $n(e,t){var n=e.title,a=e.titleId,i=Jn(e,Kn);return r.createElement("svg",Xn({viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,Zn||(Zn=r.createElement("path",{d:"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})))}var ea,ta=r.forwardRef($n),na=(n.p,n(17)),aa=n.n(na),ra=function(e){var t=e.children;return Object(m.jsx)("div",{className:aa.a.accordion,children:t})};!function(e){e[e.Default=0]="Default",e[e.Mission=1]="Mission"}(ea||(ea={}));var ia;ra.Panel=function(e){var t,n=e.title,a=e.isExpandedByDefault,i=void 0!==a&&a,o=e.icon,s=e.status,c=e.checked,l=e.type,u=void 0===l?ea.Default:l,d=e.children,h=Object(r.useState)(!i),f=Object(j.a)(h,2),b=f[0],p=f[1];return Object(m.jsxs)("div",{className:_()(aa.a.accordionPanel,(t={},Object(A.a)(t,aa.a.mission,u===ea.Mission),Object(A.a)(t,aa.a.collapsed,b),t)),children:[Object(m.jsxs)("div",{className:aa.a.header,onClick:function(){return p((function(e){return!e}))},children:[Object(m.jsxs)("div",{className:aa.a.headerLeft,children:[o?Object(m.jsx)("span",{className:aa.a.icon,children:o}):c?Object(m.jsx)(Yn,{className:aa.a.checkedIcon}):Object(m.jsx)(ta,{className:_()(aa.a.uncheckedIcon,Object(A.a)({},aa.a.collapsedUncheckedIcon,b))}),Object(m.jsx)("span",{className:aa.a.title,children:n})]}),Object(m.jsxs)("div",{className:aa.a.headerRight,children:[s&&Object(m.jsx)("span",{className:aa.a.status,children:s}),Object(m.jsx)(Un,{className:_()(aa.a.arrowIcon,Object(A.a)({},aa.a.collapsedArrowIcon,b))})]})]}),Object(m.jsx)("div",{className:_()(aa.a.content,Object(A.a)({},aa.a.hidden,b)),children:d})]})};var oa=["title","titleId"];function sa(){return(sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ca(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function la(e,t){var n=e.title,a=e.titleId,i=ca(e,oa);return r.createElement("svg",sa({viewBox:"0 0 16 21",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,ia||(ia=r.createElement("path",{d:"M14 7h-1V5c0-2.76-2.24-5-5-5S3 2.24 3 5v2H2C.9 7 0 7.9 0 9v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H4.9V5c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})))}var ua,da,ja=r.forwardRef(la),ma=(n.p,n(80)),ha=n.n(ma),fa=function(){var e=Object(l.g)(),t=Object(r.useRef)(null),n=Bt(),i=n.nickname,o=n.changeNickname,s=n.email,c=n.avatar,u=n.changePassword,d=n.error,h=n.passwordWasChanged,f=n.isProfileStoreFetching,b=Object(r.useState)(i),p=Object(j.a)(b,2),v=p[0],O=p[1],g=Object(r.useState)(""),x=Object(j.a)(g,2),y=x[0],_=x[1],w=Object(r.useState)(""),k=Object(j.a)(w,2),C=k[0],S=k[1];Object(r.useEffect)((function(){O(i)}),[i]);var T=function(){i!==v&&o(v)},N=function(){u(y,C,(function(){_(""),S("")}))},P=function(e,t){return!e||e.field!==t};return Object(m.jsxs)(K,{isFetching:f,children:[Object(m.jsx)(K.Header,{backTo:a.Home,children:Object(m.jsx)(F,{title:"Profile"})}),Object(m.jsxs)(K.Content,{children:[!!d&&"nickname"===d.field&&Object(m.jsx)(Ie,{type:te.error,children:d.message}),h&&Object(m.jsx)(Ie,{type:te.warning,children:"Password was changed successfully!"}),Object(m.jsxs)("div",{className:ha.a.profileAvatarContainer,children:[Object(m.jsx)(Ct,{type:xt.Round,image:c,additionalClasses:ha.a.profileAvatar}),Object(m.jsx)(L,{title:"Change Avatar",onClick:function(){return e.push(a.ProfileChangeAvatar)},type:I.Dark})]}),Object(m.jsx)(qe,{value:s,label:"Email",name:"email",disabled:!0,additionalClasses:"verticalSpace"}),Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault(),T(),t&&t.current&&t.current.blur()},children:Object(m.jsx)(qe,{value:v,onChange:function(e){O(e.target.value)},onBlur:T,inputRef:t,label:"Username",name:"nickname",isValid:P(d,"nickname"),additionalClasses:"verticalSpace"})}),Object(m.jsx)(ra,{children:Object(m.jsxs)(ra.Panel,{title:"Change password",icon:Object(m.jsx)(ja,{className:ha.a.passwordIcon}),children:[!!d&&("oldPassword"===d.field||"newPassword"===d.field)&&Object(m.jsx)(Ie,{type:te.error,children:d.message}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),N()},children:[Object(m.jsx)(qe,{value:y,onChange:function(e){return _(e.target.value)},type:"password",label:"Old Password",name:"oldPassword",isValid:P(d,"oldPassword"),additionalClasses:"verticalSpace"}),Object(m.jsx)(qe,{value:C,onChange:function(e){return S(e.target.value)},type:"password",label:"New Password",name:"newPassword",isValid:P(d,"newPassword"),additionalClasses:"verticalSpace"}),Object(m.jsx)("div",{className:ha.a.changeButton,children:Object(m.jsx)(L,{title:"Change",onClick:N,type:I.Main})})]})]},0)})]})]})},ba=function(){var e=Ft().isAvatarListStoreFetching;return Object(m.jsxs)(K,{isFetching:e,children:[Object(m.jsx)(K.Header,{backTo:a.Profile,children:Object(m.jsx)(F,{title:"Change Avatar"})}),Object(m.jsx)(K.Content,{children:Object(m.jsx)(Et,{})})]})},pa=n(122),va=n.n(pa),Oa=function(e){var t=e.progress,n=e.additionalClasses;return Object(m.jsx)("div",{className:_()(va.a.progressContainer,n),children:Object(m.jsx)("div",{style:{width:"".concat(ga(t),"%")},className:va.a.progress})})},ga=function(e){return e<0?0:100<e?100:e},xa=function(){var e=Object(l.g)(),t=tn(),n=t.teamName,i=t.changeTeamName,o=t.validateTeamName,s=t.teamPlayers,c=t.isCurrentUserCaptain,u=t.error,d=t.progress,h=t.isTeamStoreFetching,f=Object(r.useState)(""),b=Object(j.a)(f,2),p=b[0],v=b[1];Object(r.useEffect)((function(){v(n)}),[n]);return Object(m.jsxs)(K,{isFetching:h,children:[Object(m.jsx)(K.Header,{onBack:function(){o(p).then((function(){e.push(a.Home)})).catch((function(){}))},children:Object(m.jsx)(F,{title:"Team"})}),Object(m.jsxs)(K.Content,{children:[Object(m.jsx)(Oa,{progress:d,additionalClasses:"verticalSpace"}),Object(m.jsx)(Yt,{currentTeamName:p,changeTeamName:i,setCurrentTeamName:v,teamPlayers:s,isCurrentUserCaptain:c,error:u})]})]})},ya=["title","titleId"];function _a(){return(_a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wa(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ka(e,t){var n=e.title,a=e.titleId,i=wa(e,ya);return r.createElement("svg",_a({viewBox:"0 0 88 88",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,ua||(ua=r.createElement("rect",{width:88,height:88,rx:44,fill:"#FFDE89"})),da||(da=r.createElement("path",{d:"M42.166 47.666h-3.667c0-9.111 7.389-16.5 16.5-16.5v3.667c-7.095 0-12.833 5.739-12.833 12.834zm12.833-5.5V38.5c-5.06 0-9.166 4.106-9.166 9.166h3.666c0-3.043 2.457-5.5 5.5-5.5zM34.833 29.334a3.654 3.654 0 00-3.667-3.666 3.654 3.654 0 00-3.667 3.666A3.654 3.654 0 0031.166 33a3.654 3.654 0 003.667-3.667zm8.158.917h-3.667a5.481 5.481 0 01-5.408 4.583h-5.5a2.746 2.746 0 00-2.75 2.75v4.584h11v-4.144c3.41-1.082 5.958-4.088 6.325-7.773zm13.842 22.916a3.654 3.654 0 003.666-3.666 3.654 3.654 0 00-3.666-3.667 3.654 3.654 0 00-3.667 3.667 3.654 3.654 0 003.667 3.666zM59.583 55h-5.5a5.48 5.48 0 01-5.409-4.584h-3.666c.366 3.686 2.915 6.692 6.325 7.774v4.143h11V57.75a2.746 2.746 0 00-2.75-2.75z",fill:"#1D2360"})))}var Ca,Sa=r.forwardRef(ka),Ia=(n.p,n(123)),Ta=n.n(Ia),Na=function(){var e=ft(),t=e.gameState,n=e.isGameStoreFetching;return Object(m.jsxs)(K,{footerWithActions:!0,isFetching:n,children:[Object(m.jsx)(K.Header,{backTo:a.Home,children:Object(m.jsx)(F,{title:"Contact"})}),Object(m.jsx)(K.Content,{children:Object(m.jsx)(ln,{icon:Object(m.jsx)(Sa,{}),mainText:"Need help?",additionalText:"Sherlock got his Watson, you have us - Help Force One! Here to serve you. Need a live hint or somethings gone rogue contact our live top agents @HelpForce1. ps. use contact HQ only when instructed."})}),Object(m.jsxs)(K.Footer,{additionalClasses:Ta.a.contactFooter,children:[Object(m.jsx)(L,{title:"Live HelpForce1",type:I.Secondary,additionalClasses:Ta.a.contactButton,onClick:function(){window.open(t.linkToHelp)}}),Object(m.jsx)(L,{title:"Contact HQ",type:I.Main,onClick:function(){window.open(t.linkToBot)}})]})]})},Pa=n(34),Fa=n.n(Pa);!function(e){e[e.Small=0]="Small",e[e.Large=1]="Large"}(Ca||(Ca={}));var Aa,Ma=function(e){var t,n,r=e.inventory,i=e.size,o=Object(l.g)();return Object(m.jsxs)("div",{className:_()(Fa.a.inventory,(t={},Object(A.a)(t,Fa.a.used,r.isUsed),Object(A.a)(t,Fa.a.small,i===Ca.Small),Object(A.a)(t,Fa.a.large,i===Ca.Large),t)),onClick:function(){return o.push({pathname:a.InventoryDetails,state:{inventory:r}})},children:[Object(m.jsx)(Fn,{url:r.resource,additionalClasses:_()(Fa.a.inventoryImage,(n={},Object(A.a)(n,Fa.a.inventoryImageUsed,r.isUsed),Object(A.a)(n,Fa.a.smallImage,i===Ca.Small),Object(A.a)(n,Fa.a.largeImage,i===Ca.Large),n))}),r.isUsed&&Object(m.jsx)(Yn,{className:Fa.a.checkedIcon})]})},Ea=n(35),Ba=n.n(Ea),La=function(e){for(var t=e.inventoryItems,n=[],a=0;a<4-t.length;a++)n.push(Object(m.jsx)("div",{className:Ba.a.inventoryPlaceholder},a));return 0===t.length?Object(m.jsxs)("div",{className:Ba.a.inventoryList,children:[Object(m.jsx)("div",{className:Ba.a.noInventoryMessage,children:"You don\u2019t have any inventory yet"}),Object(m.jsx)("div",{className:Ba.a.inventoryItems,children:n})]}):Object(m.jsx)("div",{className:Ba.a.inventoryList,children:Object(m.jsx)("div",{className:Ba.a.inventoryWrapper,children:Object(m.jsxs)("div",{className:Ba.a.inventoryItems,children:[t.map((function(e,t){return Object(m.jsx)("div",{className:Ba.a.inventoryItem,children:Object(m.jsx)(Ma,{inventory:e,size:Ca.Large})},t)})),n.length>0&&Object(m.jsx)(m.Fragment,{children:n})]})})})},Ha=n(50),Ra=n.n(Ha),Da=function(){var e=Object(l.g)(),t=tn(),n=t.teamName,r=t.teamPlayers,i=t.progress;return Object(m.jsxs)("div",{className:Ra.a.gameInfo,children:[Object(m.jsxs)("div",{className:Ra.a.teamInfo,children:[Object(m.jsxs)("div",{className:Ra.a.teamName,children:["Team: ",n]}),Object(m.jsxs)("div",{className:Ra.a.teamMembers,onClick:function(){return e.push(a.ProfileTeam)},children:[r.length," members",Object(m.jsx)(Un,{className:Ra.a.gtIcon})]})]}),Object(m.jsx)("div",{className:Ra.a.gameProgress,children:Object(m.jsx)(Oa,{progress:i})})]})},Va=function(e){var t=e.dayNumber,n=e.answer;return pe.a.patch("/self/day/".concat(t),{key:"passcode",value_str:n}).catch((function(e){throw e.response.data}))},za=function(e){var t=e.dayNumber,n=e.taskId,a=e.answer;return pe.a.patch("/self/days/".concat(t,"/tasks/").concat(n),{key:"answer",value_str:a}).then((function(e){return function(e){return{correct:e.correct,inventoryItems:e.new_inventory_items}}(e.data)})).catch((function(e){throw e.response.data}))},Ua=function(e){var t=e.dayNumber,n=e.taskId;return pe.a.patch("/self/days/".concat(t,"/tasks/").concat(n),{key:"skipped",value_bool:!0}).then((function(e){return e.data})).catch((function(e){throw e.response.data}))},Wa=function(e){return pe.a.patch("/self/day/".concat(e),{key:"team_task_completion_viewed",value_bool:!0}).catch((function(e){throw e.response.data}))},Ga=function(e){var t=e.dayNumber,n=e.taskId,a=e.hintNumber;return pe.a.get("/self/days/".concat(t,"/tasks/").concat(n,"/hints/").concat(a)).then((function(e){return e.data})).catch((function(e){throw e.response.data}))},Qa=["Correct","Super Correct!","Well done!","You are right","Awesome! Fine job you did!"],qa=["Incorrect","Think more time","Not right","Wrong answer","Absolutely wrong"],Za=function(e){return e[Math.floor(Math.random()*e.length)]},Ya=function(){var e=Object(d.b)(),t=Object(r.useState)(""),n=Object(j.a)(t,2),i=n[0],o=n[1],s=Object(l.g)(),c=ft(),u=c.currentDay,m=c.isGameStoreFetching,h=Object(r.useState)([]),f=Object(j.a)(h,2),b=f[0],p=f[1],v=Object(r.useState)(null),O=Object(j.a)(v,2),g=O[0],x=O[1],y=Object(r.useState)(0),_=Object(j.a)(y,2),w=_[0],k=_[1],C=Object(r.useState)(null),S=Object(j.a)(C,2),I=S[0],T=S[1],N=Object(r.useState)(null),P=Object(j.a)(N,2),F=P[0],A=P[1],M=Object(ae.a)(Va),E=Object(ae.a)(za),B=Object(ae.a)(Ua),L=Object(ae.a)(Wa,{onSuccess:function(){e.invalidateQueries("game")}}),H=Object(ae.a)(Ga,{onSuccess:function(){e.invalidateQueries("game")}}),R=b.filter((function(e){return e.isSkipped})).length,D=u.tasks.filter((function(e){var t=e.isSolved,n=e.isTeamTask;return t&&!n})).length,V=1<=R,z=0!==u.totalTasks-D-b.length-1,U=!V&&z,W=w<b.length-1;Object(r.useEffect)((function(){p(u.tasks.filter((function(e){var t=e.isSolved,n=e.isTeamTask;return!t&&!n})));var e=u.tasks.filter((function(e){var t=e.isSolved,n=e.isTeamTask;return!t&&n}));e.length>0&&x(e[0])}),[u]);var G=function(){e.invalidateQueries("game"),e.invalidateQueries("team")};return{isMissionStoreFetching:m||M.isLoading||E.isLoading||B.isLoading||L.isLoading||H.isLoading,answer:i,setAnswer:o,unlockDay:function(t,n){M.isLoading||M.mutateAsync({dayNumber:t,answer:n}).then((function(e){return e.data})).then((function(e){var t=e.correct;return T({isCorrect:t,message:Za(t?Qa:qa)}),t})).then((function(t){setTimeout((function(){t?(e.invalidateQueries("game"),s.push(a.Mission)):T(null)}),3e3)}))},unlockResult:I,answerTask:function(e,t,n){0===n.trim().length||E.isLoading||E.mutateAsync({dayNumber:e,taskId:t.id,answer:n}).then((function(e){return A({isCorrect:e.correct,message:e.correct?Za(Qa):Za(qa)}),e.correct||G(),e})).then((function(e){setTimeout((function(){if(e.correct){if(G(),e.inventoryItems.length>0)return void s.push({pathname:a.ReceivedInventories,state:{inventories:e.inventoryItems}});k(0),t.isTeamTask&&s.push(a.Home)}A(null),o("")}),3e3)}))},answerTaskResult:F,currentTask:b[w]||g,isNextPrivateTaskAvailable:U||W,switchToNextTask:function(){V?k((function(e){return e+1})):B.mutateAsync({dayNumber:u.dayNumber,taskId:b[w].id}).then((function(t){t.skipped&&(e.invalidateQueries("game"),k((function(e){return e+1})))})),o(""),A(null)},isPrevPrivateTaskAvailable:b.length>1&&0!==w,switchToPrevTask:function(){k((function(e){return e-1})),o(""),A(null)},markTeamTaskCompletionViewed:function(){L.mutateAsync(u.dayNumber).then((function(){s.push(a.Home)}))},fetchHint:function(e,t,n){H.isLoading||H.mutate({dayNumber:e,taskId:t,hintNumber:n})}}},Ka=n(51),Xa=n.n(Ka),Ja=function(e){var t=e.answer,n=e.onChange,a=e.onSubmit,i=e.placeholder,o=e.answerResult,s=Object(r.useRef)(null);return Object(m.jsxs)("div",{className:Xa.a.answerContainer,children:[!!o&&Object(m.jsx)(Ie,{type:o.isCorrect?te.warning:te.error,children:o.message}),Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault(),a&&a(),s&&s.current&&s.current.blur()},children:Object(m.jsx)(qe,{value:t,onChange:n,placeholder:i,inputRef:s,addonAfter:Object(m.jsx)("button",{className:Xa.a.answerButton,onClick:a,type:"submit",children:Object(m.jsx)(Yn,{className:_()(Xa.a.answerButtonIcon,Object(A.a)({},Xa.a.correctButtonIcon,!!o&&o.isCorrect))})}),additionalClasses:_()(Xa.a.answerInput,Object(A.a)({},Xa.a.correctAnswerInput,!!o&&o.isCorrect))})})]})},$a=n(66),er=n.n($a),tr=function(e){var t=e.inventoryItems.filter((function(e){return e.isAvailable}));return 0===t.length?null:Object(m.jsx)("div",{className:er.a.inventoryItems,children:t.map((function(e,t){return Object(m.jsxs)("div",{className:er.a.inventory,children:[Object(m.jsx)(Ma,{inventory:e,size:Ca.Small}),Object(m.jsxs)("div",{className:er.a.inventoryInfo,children:[Object(m.jsx)("div",{className:er.a.inventoryTitle,children:"Personal Item"}),Object(m.jsx)("div",{className:er.a.inventoryName,children:e.name})]})]},t)}))})},nr=n(199),ar=n.n(nr),rr=function(e){var t=e.day,n=Object(l.g)(),r=Ya(),i=r.answer,o=r.setAnswer,s=r.unlockDay,c=r.unlockResult;return t.status===ze.Solved?Object(m.jsxs)("div",{children:[Object(m.jsx)(tr,{inventoryItems:t.inventoryItems}),Object(m.jsx)("div",{className:"centerContent",children:Object(m.jsx)(L,{title:"Continue",onClick:function(){return n.push({pathname:a.MissionStory,state:{dayNumber:t.dayNumber}})},type:I.Main})})]}):t.status===ze.NotStarted?Object(m.jsx)("div",{className:"centerContent",children:Object(m.jsx)(L,{title:"Starts at ".concat(t.startTime.format("lll")),type:I.Secondary})}):t.isPasscodeEntered?Object(m.jsxs)("div",{className:ar.a.dayMission,children:[Object(m.jsx)(tr,{inventoryItems:t.inventoryItems}),Object(m.jsx)("div",{className:"centerContent",children:Object(m.jsx)(L,{title:"Continue",type:I.Main,onClick:function(){return n.push(a.Mission)}})})]}):Object(m.jsx)(Ja,{answer:i,onChange:function(e){return o(e.target.value)},onSubmit:function(){return s(t.dayNumber,i)},answerResult:c,placeholder:"Type passcode..."})},ir=n(81),or=n.n(ir),sr=function(){var e=Object(l.g)(),t=Bt(),n=t.avatar,r=t.isProfileStoreFetching,i=ft(),o=i.gameState,s=i.currentDay,c=i.areAllTasksSolved,u=i.allInventoryItems,d=i.isGameStoreFetching,j=Ya().isMissionStoreFetching,h=o.gameName,f=o.days,b=d||r||j;return b||s.status!==ze.Solved||s.isTeamTaskCompletionViewed?b||!c||o.isFinalStoryViewed?Object(m.jsxs)(K,{isFetching:b,children:[Object(m.jsx)(K.Header,{children:Object(m.jsxs)("div",{className:or.a.header,children:[Object(m.jsx)(F,{title:h,additionalClasses:or.a.gameName}),Object(m.jsxs)("div",{className:or.a.headerActions,children:[Object(m.jsx)(L,{title:"Help",onClick:function(){return e.push(a.Contact)},type:I.Dark,additionalClasses:or.a.helpButton}),Object(m.jsx)(Ct,{type:xt.Round,onClick:function(){return e.push(a.Profile)},image:n})]})]})}),Object(m.jsxs)(K.Content,{children:[Object(m.jsx)(La,{inventoryItems:u}),Object(m.jsxs)(ra,{children:[Object(m.jsx)(ra.Panel,{title:"Check In",checked:o.isBotConnected,children:Object(m.jsx)("div",{className:"centerContent",children:Object(m.jsx)(L,{title:"Continue",onClick:function(){return e.push(a.OnboardingCheckIn)},type:I.Main})})},0),Object(m.jsx)(ra.Panel,{title:"Learn the story",checked:o.isMainStoryViewed,children:Object(m.jsx)("div",{className:"centerContent",children:Object(m.jsx)(L,{title:"Continue",onClick:function(){return e.push(a.OnboardingMainStory)},type:I.Main})})},1),f.filter((function(e){return e.status!==ze.Future})).map((function(e,t){return Object(m.jsx)(ra.Panel,{title:"Mission ".concat(t+1),status:cr(e.status),type:e.status===ze.InProgress||e.status===ze.NotStarted?ea.Mission:ea.Default,isExpandedByDefault:e.status===ze.InProgress||e.status===ze.NotStarted,checked:e.status===ze.Solved,children:Object(m.jsx)(rr,{day:e})},t)})),c&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ra.Panel,{title:"Learn the final story",checked:o.isFinalStoryViewed,children:Object(m.jsx)("div",{className:"centerContent",children:Object(m.jsx)(L,{title:"Continue",onClick:function(){return e.push(a.FinalStory)},type:I.Main})})}),Object(m.jsx)(ra.Panel,{title:"Final Mission",checked:!1,isExpandedByDefault:!0,type:ea.Mission,children:Object(m.jsx)("div",{className:"centerContent",children:rt()()<o.finalEventStartTime?Object(m.jsx)(L,{title:"Starts at ".concat(o.finalEventStartTime.format("lll")),type:I.Secondary}):Object(m.jsx)(L,{title:"Enter backdoor",onClick:function(){return e.push(a.FinalEvent)},type:I.Main})})})]})]})]}),Object(m.jsx)(K.Footer,{children:Object(m.jsx)(Da,{})})]}):(e.push(a.FinalStory),null):(e.push(a.MissionCompleted),null)},cr=function(e){switch(e){case ze.Solved:return"Completed";case ze.InProgress:return"In progress";default:return}},lr=function(){var e=Object(l.h)().state.inventory;return Object(m.jsxs)(K,{children:[Object(m.jsx)(K.Header,{backTo:a.Home,children:Object(m.jsx)(F,{title:"Personal Item"})}),Object(m.jsxs)(K.Content,{children:[Object(m.jsx)(Fn,{url:e.resource,additionalClasses:"verticalSpace"}),Object(m.jsx)("div",{children:e.name})]})]})},ur=function(){return pe.a.post("/self/log-spent-time",{object:"total",amount_s:3}).catch((function(e){throw e.response.data}))};!function(e){e[e.TotalTime=0]="TotalTime",e[e.TaskTime=1]="TaskTime"}(Aa||(Aa={}));var dr,jr=function(e,t){var n=Object(r.useState)(!1),a=Object(j.a)(n,2),i=a[0],o=a[1];return Object(nt.a)("total-time",ur,{refetchInterval:3e3,refetchOnMount:!1,staleTime:1/0,enabled:!1}),Object(nt.a)(["task-time",t],(function(){return function(e){return pe.a.post("/self/log-spent-time",{object:"task",task_id:e,amount_s:3}).catch((function(e){throw e.response.data}))}(t)}),{refetchInterval:3e3,refetchOnMount:!1,staleTime:1/0,enabled:!1}),{isTrackingEnabled:i,setIsTrackingEnabled:o}},mr=["title","titleId"];function hr(){return(hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function fr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function br(e,t){var n=e.title,a=e.titleId,i=fr(e,mr);return r.createElement("svg",hr({viewBox:"0 0 21 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,dr||(dr=r.createElement("path",{d:"M17.4 3.6C15.55 1.99 13.15 1 10.5 1 5.85 1 1.92 4.03.54 8.22L2.9 9a8.002 8.002 0 017.6-5.5c1.95 0 3.73.72 5.12 1.88L12 9h9V0l-3.6 3.6z"})))}var pr,vr,Or=r.forwardRef(br),gr=(n.p,n(37)),xr=n(42),yr=n.n(xr),_r=function(e){var t=e.type,n=e.resources,r=Object(l.g)();if(t===Ue.Text)return null;if(t===Ue.Ar)return Object(m.jsx)("div",{className:yr.a.urlButton,children:Object(m.jsx)(L,{title:"Go to AR",type:I.Main,onClick:function(){r.push({pathname:a.ArTask,state:{videoUrl:n[0]}})}})});if(t===Ue.Vr)return Object(m.jsxs)(m.Fragment,{children:[n[0]&&Object(m.jsx)("div",{className:yr.a.imageWrapper,children:Object(m.jsx)(Fn,{url:n[0]})}),Object(m.jsx)("div",{className:yr.a.urlButton,children:Object(m.jsx)(L,{title:"Go to VR",type:I.Main,onClick:function(){r.push({pathname:a.VrTask,state:{resources:n.slice(1)}})}})})]});if(t===Ue.Url)return Object(m.jsx)("div",{className:yr.a.urlButton,children:Object(m.jsx)(L,{title:"Go to site",type:I.Main,onClick:function(){window.open(n[0])}})});if(t===Ue.Video){var i=n[0].split("/").pop();return Object(m.jsx)("div",{className:yr.a.videoWrapper,children:Object(m.jsx)("iframe",{src:"https://player.vimeo.com/video/".concat(i,"?color=ef2200&byline=0"),title:"video",className:yr.a.videoIframe,frameBorder:0,allow:"fullscreen",allowFullScreen:!0})})}return Object(m.jsx)("div",{className:yr.a.imageWrapper,children:Object(m.jsx)(Fn,{url:n[0]})})},wr=n(124),kr=n.n(wr),Cr=function(e){var t=e.task,n=Object(gr.a)(Object(gr.a)({},t),{},{type:Ue.Ar,resources:["https://vimeo.com/311983548"],hints:[]});return Object(m.jsxs)("div",{children:[n&&!!n.text&&Object(m.jsx)("div",{className:kr.a.taskText,children:n.text}),n&&Object(m.jsx)(_r,{type:n.type,resources:n.resources}),n&&n.isTeamTask&&Object(m.jsx)("div",{className:kr.a.teamTaskText,children:"1+1+1+...+1 and the job is mostly done. Now, who has one? If only you knew someone..."}),n&&n.hints.map((function(e,t){return Object(m.jsx)(Ie,{type:te.info,children:e},t)}))]})},Sr=n(31),Ir=n.n(Sr),Tr=function(){var e=Object(l.g)(),t=ft(),n=t.currentDay,i=t.isGameStoreFetching,o=tn(),s=o.isCurrentUserCaptain,c=o.isTeamStoreFetching,u=Ya(),d=u.answer,j=u.setAnswer,h=u.currentTask,f=u.isNextPrivateTaskAvailable,b=u.isPrevPrivateTaskAvailable,p=u.switchToPrevTask,v=u.switchToNextTask,O=u.answerTaskResult,g=u.answerTask,x=u.fetchHint,y=u.isMissionStoreFetching,w=i||c||y,k=!(null===h||void 0===h?void 0:h.isTeamTask)||s,C=jr(Aa.TaskTime,null===h||void 0===h?void 0:h.id),S=C.isTrackingEnabled,T=C.setIsTrackingEnabled;if(Object(r.useEffect)((function(){S||T(!0)}),[]),!w&&n.status===ze.Solved)return e.push(a.Home),null;if(!w&&!n.isDailyStoryViewed)return e.push({pathname:a.MissionStory,state:{dayNumber:n.dayNumber}}),null;return Object(m.jsxs)(K,{isFetching:w,footerWithGradient:k,children:[Object(m.jsx)(K.Header,{backTo:a.Home,children:Object(m.jsxs)("div",{className:Ir.a.header,children:[Object(m.jsx)(F,{title:"Mission ".concat(n.dayNumber)}),Object(m.jsxs)("div",{className:Ir.a.headerActions,children:[(null===h||void 0===h?void 0:h.areHintsAvailable)&&Object(m.jsx)(L,{title:"Hint",type:I.Dark,onClick:function(){return x(n.dayNumber,h.id,h.hints.length)}}),b&&Object(m.jsx)("button",{className:Ir.a.taskButton,onClick:function(){p()},children:Object(m.jsx)(Or,{className:_()(Ir.a.taskButtonIcon,Ir.a.prevTaskButton)})}),f&&Object(m.jsx)("button",{className:Ir.a.taskButton,onClick:function(){v()},children:Object(m.jsx)(Or,{className:_()(Ir.a.taskButtonIcon,Ir.a.nextTaskButton)})})]})]})}),Object(m.jsx)(K.Content,{additionalClasses:Ir.a.missionContent,children:Object(m.jsx)(Cr,{task:h})}),w||k?Object(m.jsx)(K.Footer,{centered:!0,additionalClasses:Ir.a.missionFooter,children:Object(m.jsx)(Ja,{answer:d,onChange:function(e){return j(e.target.value)},onSubmit:function(){h&&g(n.dayNumber,h,d)},answerResult:O,placeholder:"Type your answer..."})}):null]})},Nr=["title","titleId"];function Pr(){return(Pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Fr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ar(e,t){var n=e.title,a=e.titleId,i=Fr(e,Nr);return r.createElement("svg",Pr({viewBox:"0 0 88 88",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),n?r.createElement("title",{id:a},n):null,pr||(pr=r.createElement("rect",{width:88,height:88,rx:44,fill:"#FFDE89"})),vr||(vr=r.createElement("path",{d:"M44 25.667c-10.12 0-18.334 8.213-18.334 18.333s8.213 18.333 18.333 18.333S62.333 54.12 62.333 44s-8.214-18.333-18.334-18.333zm-3.667 27.5L31.166 44l2.585-2.585 6.582 6.563 13.915-13.915 2.585 2.604-16.5 16.5z",fill:"#1D2360"})))}var Mr=r.forwardRef(Ar),Er=(n.p,function(){var e=Ya(),t=e.markTeamTaskCompletionViewed,n=e.isMissionStoreFetching;return Object(m.jsxs)(K,{footerWithGradient:!0,isFetching:n,children:[Object(m.jsx)(K.Content,{children:Object(m.jsx)(ln,{icon:Object(m.jsx)(Mr,{}),mainText:"Daily mission completed!"})}),Object(m.jsx)(K.Footer,{centered:!0,children:Object(m.jsx)(L,{title:"Continue",onClick:function(){t()},type:I.Main})})]})}),Br=function(){var e=Object(l.g)(),t=Object(l.h)(),n=Cn(hn.Daily,t.state.dayNumber),r=n.dailyStory,i=n.markDailyStoryViewed,o=n.isStoryStoreFetching;return Object(m.jsx)(En,{pages:r?r.pages:[],isFetching:o,onStart:function(){i()},onClose:function(){e.push(a.Home)}})},Lr=n(92),Hr=n.n(Lr),Rr=Object(r.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,367))})),Dr=function(){var e=Object(l.g)();return Object(m.jsx)("div",{className:Hr.a.vrTaskContainer,children:Object(m.jsxs)(r.Suspense,{fallback:Object(m.jsx)(q.a,{isLoading:!0}),children:[Object(m.jsx)("button",{className:Hr.a.closeButton,onClick:function(){return e.goBack()},children:Object(m.jsx)(T,{className:Hr.a.closeButtonIcon})}),Object(m.jsx)(Rr,{})]})})},Vr=n(67),zr=n.n(Vr),Ur=function(){var e=Object(l.g)(),t=Object(l.h)(),n=Object(r.useState)(!1),a=Object(j.a)(n,2),i=a[0],o=a[1],s=t.state.videoUrl.split("/").pop(),c="https://player.vimeo.com/video/".concat(s);return Object(m.jsxs)("div",{className:zr.a.arTaskContainer,children:[Object(m.jsx)(q.a,{isLoading:!i}),Object(m.jsxs)("div",{className:zr.a.arTaskFrameContainer,children:[Object(m.jsx)("button",{className:zr.a.closeButton,onClick:function(){return e.goBack()},children:Object(m.jsx)(T,{className:zr.a.closeButtonIcon})}),Object(m.jsx)("iframe",{className:zr.a.arTaskFrame,title:"vr-task",src:"".concat("","/ar_task/video.html?videoSrc=").concat(c),onLoad:function(){o(!0)}})]})]})},Wr=n(125),Gr=n.n(Wr),Qr=function(){var e=Object(l.g)(),t=Object(r.useState)(0),n=Object(j.a)(t,2),i=n[0],o=n[1],s=Object(l.h)().state.inventories,c=function(){i<s.length-1?o((function(e){return e+1})):e.push(a.Mission)};return Object(m.jsxs)(K,{withoutHeader:!0,footerWithGradient:1===s.length,children:[Object(m.jsxs)(K.Content,{children:[Object(m.jsx)("div",{className:Gr.a.title,children:"Congrats!"}),Object(m.jsx)("div",{className:Gr.a.message,children:"You have just unlocked the secret to the universe. That or just an item. Either way, keep it handy, useful it will be."}),Object(m.jsx)(Fn,{url:s[i].resource,additionalClasses:"verticalSpace"}),s[i].name&&Object(m.jsx)("div",{children:s[i].name})]}),Object(m.jsx)(K.Footer,{centered:!0,children:s.length>1?Object(m.jsx)(Tn,{items:s,activeIndex:i,setActiveIndex:o,onLastItem:c,nextItemButtonTitle:"Next",lastItemButtonTitle:"Continue"}):Object(m.jsx)(L,{title:"Continue",type:I.Main,onClick:c})})]})},qr=function(){var e=Object(l.g)(),t=ft().gameState,n=Cn(hn.Final),r=n.finalStory,i=n.markFinalViewed,o=n.isStoryStoreFetching;return Object(m.jsx)(En,{pages:r?r.pages:[],isFetching:o,onStart:function(){i()},onClose:t.isFinalStoryViewed?function(){return e.push(a.Home)}:void 0})},Zr=n(200),Yr=n.n(Zr),Kr=function(){var e=function(){var e=Object(l.g)(),t=Object(d.b)(),n=Object(nt.a)("final-questionnaire",lt,{staleTime:1/0}),r=n.data,i=n.isFetching,o=Object(ae.a)(ut,{onSuccess:function(){t.invalidateQueries("game"),e.push(a.Home)}});return{isQuestionnaireStoreFetching:i,feedbackForm:r||"",markFinalPageViewed:function(){o.mutate()}}}(),t=e.feedbackForm,n=e.markFinalPageViewed,r=e.isQuestionnaireStoreFetching;return Object(m.jsxs)(K,{footerWithActions:!0,isFetching:r,children:[Object(m.jsx)(K.Header,{children:Object(m.jsx)(F,{title:"",onClose:n})}),Object(m.jsx)(K.Content,{children:Object(m.jsx)(ln,{icon:Object(m.jsx)(Mr,{}),mainText:"Mission completed!",additionalText:"Today you made a piece of history. Together you are unstoppable and can create legends. Thank you! How was it for you? Fill out the form below to let us know about your experience with the quest."})}),Object(m.jsx)(K.Footer,{children:Object(m.jsx)(L,{title:"Rate experience",type:I.Secondary,additionalClasses:Yr.a.rateButton,onClick:function(){window.open(t)}})})]})},Xr=function(){var e=Cn(hn.FinalEvent),t=e.finalEvent,n=e.isStoryStoreFetching;return t?Object(m.jsxs)(K,{isFetching:n,children:[Object(m.jsx)(K.Header,{backTo:a.Home,children:Object(m.jsx)(F,{title:"Final Mission"})}),Object(m.jsxs)(K.Content,{children:[Object(m.jsx)("div",{className:"verticalSpace",children:t.text}),Object(m.jsx)(Fn,{url:t.resource,additionalClasses:"verticalSpace"}),Object(m.jsx)("div",{className:"centerContent",children:Object(m.jsx)(L,{title:"Go to details",type:I.Main,onClick:function(){return window.open(null===t||void 0===t?void 0:t.externalLink)}})})]})]}):null},Jr=n.p+"static/media/logo512.3c37cbc3.png",$r=n(68),ei=n.n($r),ti=function(){return Object(m.jsx)("div",{className:ei.a.install,children:Object(m.jsxs)("div",{className:ei.a.installContent,children:[Object(m.jsx)("div",{className:ei.a.icon,children:Object(m.jsx)("img",{className:ei.a.iconImg,src:Jr,alt:""})}),Object(m.jsx)("h1",{className:ei.a.title,children:"You\u2019re just two taps away."}),Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:"For the best experience add the app to your home screen."}),Object(m.jsx)("h3",{children:"For iOS users:"}),Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{children:"Open this website in Safari."}),Object(m.jsx)("li",{children:"Tap the \u2018Share\u2019 button."}),Object(m.jsx)("li",{children:"Scroll down and tap \u2018Add to Home Screen.\u2019"}),Object(m.jsx)("li",{children:"Tap add button in the top right corner."}),Object(m.jsx)("li",{children:"Done, the app is on your home screen!"})]}),Object(m.jsx)("h3",{children:"For Android users:"}),Object(m.jsxs)("ol",{children:[Object(m.jsx)("li",{children:"Open this website in Chrome."}),Object(m.jsx)("li",{children:"Tap menu (3 dots)"}),Object(m.jsx)("li",{children:"Tap \u2018Install app\u2019"}),Object(m.jsx)("li",{children:"Done, the app is on your home screen!"}),Object(m.jsx)("br",{}),Object(m.jsx)("p",{children:"(Alternatively, wait for a few seconds for the installation pop-up to come up on the bottom of the screen and tap there)"})]})]})]})})},ni=function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Not Found"})})},ai=function(e){return je()?Object(m.jsx)(l.b,Object(gr.a)({},e)):Object(m.jsx)(l.a,{to:"true"===window.localStorage.getItem(fe)?a.Login:a.Signup})},ri=function(e){var t=e.history,n=Object(l.h)().pathname,a=jr(Aa.TotalTime),i=a.isTrackingEnabled,o=a.setIsTrackingEnabled;return Object(r.useEffect)((function(){return!i&&O.includes(n)&&o(!!je()),t.listen((function(e){!i&&O.includes(e.pathname)&&o(!!je())}))}),[n]),Object(m.jsx)("div",{style:{display:"hidden"}})},ii=function(e){var t=e.history;return Object(m.jsxs)(p,{history:t,children:[Object(m.jsx)(ri,{history:t}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:a.Login,component:Xe}),Object(m.jsx)(l.b,{exact:!0,path:a.Signup,component:et}),Object(m.jsx)(ai,{exact:!0,path:a.Game,component:bt}),Object(m.jsx)(ai,{exact:!0,path:a.Home,component:sr}),Object(m.jsx)(ai,{exact:!0,path:a.Profile,component:fa}),Object(m.jsx)(ai,{exact:!0,path:a.ProfileChangeAvatar,component:ba}),Object(m.jsx)(ai,{exact:!0,path:a.ProfileTeam,component:xa}),Object(m.jsx)(ai,{exact:!0,path:a.Contact,component:Na}),Object(m.jsx)(ai,{exact:!0,path:a.OnboardingPersonalize,component:Rt}),Object(m.jsx)(ai,{exact:!0,path:a.OnboardingCheckIn,component:bn}),Object(m.jsx)(ai,{exact:!0,path:a.OnboardingTeam,component:on}),Object(m.jsx)(ai,{exact:!0,path:a.OnboardingMainStory,component:Ln}),Object(m.jsx)(ai,{exact:!0,path:a.Mission,component:Tr}),Object(m.jsx)(ai,{exact:!0,path:a.MissionCompleted,component:Er}),Object(m.jsx)(ai,{exact:!0,path:a.MissionStory,component:Br}),Object(m.jsx)(ai,{exact:!0,path:a.VrTask,component:Dr}),Object(m.jsx)(ai,{exact:!0,path:a.ArTask,component:Ur}),Object(m.jsx)(ai,{exact:!0,path:a.InventoryDetails,component:lr}),Object(m.jsx)(ai,{exact:!0,path:a.ReceivedInventories,component:Qr}),Object(m.jsx)(ai,{exact:!0,path:a.FinalStory,component:qr}),Object(m.jsx)(ai,{exact:!0,path:a.FinalPage,component:Kr}),Object(m.jsx)(ai,{exact:!0,path:a.FinalEvent,component:Xr}),Object(m.jsx)(l.b,{exact:!0,path:"/",component:ti}),Object(m.jsx)(l.b,{path:"*",component:ni})]})]})},oi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function si(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ci,li=function(e){pe.a.interceptors.request.use((function(e){var t;if(null===(t=e.url)||void 0===t?void 0:t.includes("wikiart"))return e;var n=je();return n&&(e.headers=Object(gr.a)(Object(gr.a)({},e.headers),{},{"x-access-token":n})),e})),pe.a.interceptors.response.use((function(e){return e}),(function(t){if(401===t.response.status){var n=t.config;(r=je(),i=function(){var e=null;try{(e=ie.a.get(le))||(e=window.sessionStorage.getItem(le))}catch(t){}return e?se.a.AES.decrypt(e,le).toString(se.a.enc.Utf8):null}(),pe.a.get("token-refresh",{headers:{"x-access-token":r,"x-refresh-token":i}}).then((function(e){var t=e.data;return ge(t)}))).then((function(e){var a=function(){var e=null;try{e=ie.a.get(ce)}catch(t){}return!!e}();return he(),de(e,a),pe()(n)})).catch((function(t){return he(),e.push(a.Login),Promise.reject(t)}))}var r,i;return Promise.reject(t)}))},ui=n(201),di=n.n(ui),ji=n(202),mi=n.n(ji),hi=n(203),fi=n.n(hi),bi=(n(348),Object(c.a)());ci=bi,pe.a.defaults.baseURL="".concat("https","://").concat("questapp-test.herokuapp.com",":").concat("443").concat("/api"),li(ci),rt.a.extend(di.a),rt.a.extend(mi.a),rt.a.extend(fi.a,{parseToLocal:!0}),s.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(ii,{history:bi})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");oi?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):si(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):si(t,e)}))}}()},35:function(e,t,n){e.exports={inventoryList:"InventoryList_inventoryList__19x9X",noInventoryMessage:"InventoryList_noInventoryMessage__3tbP6",inventoryWrapper:"InventoryList_inventoryWrapper__P_3RA",inventoryItems:"InventoryList_inventoryItems__tdEUe",inventoryPlaceholder:"InventoryList_inventoryPlaceholder__3u67c",inventoryItem:"InventoryList_inventoryItem__tewi_"}},40:function(e,t,n){e.exports={textInput:"TextInput_textInput__xs-Pf",hasErrors:"TextInput_hasErrors__1jWxy",disabled:"TextInput_disabled__3IdkR",password:"TextInput_password__3RySt",inputContainer:"TextInput_inputContainer__B2MmA",passwordIcon:"TextInput_passwordIcon__hGGmA",addonAfter:"TextInput_addonAfter__sa8hI"}},41:function(e,t,n){e.exports={avatarIcon:"AvatarIcon_avatarIcon__20UVC",round:"AvatarIcon_round__1NPY6",roundBig:"AvatarIcon_roundBig__Rcepa",square:"AvatarIcon_square__3qBVn"}},42:function(e,t,n){e.exports={urlButton:"TaskResource_urlButton__T95qs",videoWrapper:"TaskResource_videoWrapper__h9wkM",imageWrapper:"TaskResource_imageWrapper__1q61_",videoIframe:"TaskResource_videoIframe__1Uzzb"}},49:function(e,t,n){e.exports={carouselControls:"CarouselControls_carouselControls__1NM04",carouselDots:"CarouselControls_carouselDots__3LcTJ",carouselDot:"CarouselControls_carouselDot__3kza4",activeDot:"CarouselControls_activeDot__2d8iT",carouselButtons:"CarouselControls_carouselButtons__28M9e",carouselButton:"CarouselControls_carouselButton__1En6f"}},50:function(e,t,n){e.exports={gameInfo:"GameInfo_gameInfo__35wQL",teamInfo:"GameInfo_teamInfo__mTeTO",teamName:"GameInfo_teamName__1XwK3",teamMembers:"GameInfo_teamMembers__1EHei",gtIcon:"GameInfo_gtIcon__7YV_l"}},51:function(e,t,n){e.exports={answerContainer:"Answer_answerContainer__3o7HL",answerInput:"Answer_answerInput__2_6z7",correctAnswerInput:"Answer_correctAnswerInput__3F6rr",answerButton:"Answer_answerButton__254zC",answerButtonIcon:"Answer_answerButtonIcon__B31D6",correctButtonIcon:"Answer_correctButtonIcon__1CyCM"}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(5),r=(n(1),n(6)),i=n.n(r),o=n(29),s=n.n(o),c=n(0),l=function(e){var t=e.isLoading;return Object(c.jsx)("div",{className:i()(s.a.spinner,Object(a.a)({},s.a.hiddenSpinner,!t)),children:Object(c.jsxs)("div",{className:s.a.rings,children:[Object(c.jsx)("div",{className:i()(s.a.ring,s.a.ring1)}),Object(c.jsx)("div",{className:i()(s.a.ring,s.a.ring2)}),Object(c.jsx)("div",{className:i()(s.a.ring,s.a.ring3)}),Object(c.jsx)("div",{className:i()(s.a.ring,s.a.ring4)})]})})}},61:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s}));var a=n(8),r=n.n(a),i=function(){return r.a.get("/resources/avatars").then((function(e){return e.data.resources})).catch((function(e){throw e.response.data}))},o=function(e){return r.a.get("/resources/avatars/".concat(c(e)),{responseType:"blob"}).then((function(e){return e.data})).catch((function(e){throw e.response.data}))},s=function(e){return r.a.get("/resources/images/".concat(c(e)),{responseType:"blob"}).then((function(e){return e.data})).catch((function(e){throw e.response.data}))},c=function(e){return e.split("/").pop()}},64:function(e,t,n){e.exports={titleContainer:"Title_titleContainer__3UzAP",icon:"Title_icon__29s9c",title:"Title_title__IYizr",closeButton:"Title_closeButton__66YTD",closeIcon:"Title_closeIcon__14gm4"}},65:function(e,t,n){e.exports={checkboxContainer:"Checkbox_checkboxContainer__1RtOQ",checkbox:"Checkbox_checkbox__1V-IG",nativeCheckbox:"Checkbox_nativeCheckbox__3RMl1",label:"Checkbox_label__2xkgf",hasErrors:"Checkbox_hasErrors__7ZBrT"}},66:function(e,t,n){e.exports={inventoryItems:"DailyInventoryItems_inventoryItems__1gMPC",inventory:"DailyInventoryItems_inventory__3Vpj1",inventoryInfo:"DailyInventoryItems_inventoryInfo__2qznP",inventoryTitle:"DailyInventoryItems_inventoryTitle__3xDTH",inventoryName:"DailyInventoryItems_inventoryName__tNmDz"}},67:function(e,t,n){e.exports={arTaskContainer:"ArTask_arTaskContainer__2PaDd",arTaskFrameContainer:"ArTask_arTaskFrameContainer__1rQ9I",arTaskFrame:"ArTask_arTaskFrame__2O-5l",closeButton:"ArTask_closeButton__CicCi",closeButtonIcon:"ArTask_closeButtonIcon__2Mc1m"}},68:function(e,t,n){e.exports={install:"Install_install__Vtcr8",installContent:"Install_installContent__Ld_ml",icon:"Install_icon__3R9xC",iconImg:"Install_iconImg__Wdony",title:"Install_title__2MSIb"}},76:function(e,t,n){e.exports={button:"Button_button__1Tx3a",main:"Button_main__1pcNb",secondary:"Button_secondary__3KCKM",dark:"Button_dark__3Ccjg"}},77:function(e,t,n){e.exports={message:"Message_message__3BGRz",error:"Message_error__19ghv",warning:"Message_warning__3L1do",info:"Message_info__14vOb"}},78:function(e,t,n){e.exports={player:"Team_player__1CCTG",playerInfo:"Team_playerInfo__2PA1m",nickname:"Team_nickname__24USy",email:"Team_email__FZVYp"}},79:function(e,t,n){e.exports={content:"Panel_content__fd9Z4",icon:"Panel_icon__1k0Wi",title:"Panel_title__1tVqG",text:"Panel_text__1cS74"}},80:function(e,t,n){e.exports={profileAvatarContainer:"Profile_profileAvatarContainer__15F5Z",profileAvatar:"Profile_profileAvatar__3soYd",passwordIcon:"Profile_passwordIcon__22Uvh",changeButton:"Profile_changeButton__6Bwnd"}},81:function(e,t,n){e.exports={header:"Home_header__zrq3l",gameName:"Home_gameName__c2AG9",headerActions:"Home_headerActions__2Kbws",helpButton:"Home_helpButton__3TktN"}},91:function(e,t,n){e.exports={additionalInfo:"Signup_additionalInfo__2qX2-",info:"Signup_info__3mu8E"}},92:function(e,t,n){e.exports={vrTaskContainer:"VrTask_vrTaskContainer__n1tHC",closeButton:"VrTask_closeButton__2ifEL",closeButtonIcon:"VrTask_closeButtonIcon__1SQXD"}}},[[349,1,2]]]);
//# sourceMappingURL=main.e1dfd7c8.chunk.js.map